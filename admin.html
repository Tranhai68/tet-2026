<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš™ï¸ Admin â€” Reo Quáº» Táº¿t</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš™ï¸</text></svg>">
</head>

<body class="admin-bg">

    <!-- Login Overlay -->
    <div class="login-overlay" id="loginOverlay">
        <div class="login-box">
            <h2>ğŸ” ÄÄƒng nháº­p Admin</h2>
            <input type="password" class="form-input" id="loginPassword" placeholder="Nháº­p máº­t kháº©u..."
                onkeydown="if(event.key==='Enter') attemptLogin()">
            <button class="btn btn-primary" onclick="attemptLogin()" style="width:100%; margin-top: 8px;">ÄÄƒng
                nháº­p</button>
            <div class="login-error" id="loginError">âŒ Sai máº­t kháº©u!</div>
        </div>
    </div>

    <!-- Admin Content -->
    <div class="admin-container" id="adminContent" style="display:none;">
        <!-- Header -->
        <div class="admin-header">
            <h1 class="admin-title">âš™ï¸ Quáº£n trá»‹ Reo Quáº» Táº¿t</h1>
            <a href="index.html" class="admin-back-link">â† Vá» trang chÃ­nh</a>
        </div>

        <!-- Stats -->
        <div class="admin-card">
            <h2>ğŸ“Š Thá»‘ng kÃª</h2>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="statSpins">0</div>
                    <div class="stat-label">Tá»•ng lÆ°á»£t quay</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statLucky">0</div>
                    <div class="stat-label">Láº§n trÃºng lÃ¬ xÃ¬</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statAmount">0Ä‘</div>
                    <div class="stat-label">Tá»•ng tiá»n lÃ¬ xÃ¬</div>
                </div>
            </div>
        </div>

        <!-- Lucky Money Settings -->
        <div class="admin-card">
            <h2>ğŸ§§ CÃ i Ä‘áº·t LÃ¬ XÃ¬</h2>

            <div class="form-group">
                <label class="form-label">Tá»‰ lá»‡ trÃºng lÃ¬ xÃ¬</label>
                <div class="range-container">
                    <input type="range" class="range-slider" id="chanceSlider" min="0" max="100" value="5"
                        oninput="updateChanceDisplay()">
                    <span class="range-value" id="chanceDisplay">5%</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Má»‡nh giÃ¡ lÃ¬ xÃ¬</label>
                <div class="amount-tags" id="amountTags"></div>
                <div class="form-row mt-md">
                    <div class="form-group" style="margin-bottom:0">
                        <input type="number" class="form-input" id="newAmountInput" placeholder="Nháº­p má»‡nh giÃ¡ (VNÄ)..."
                            min="1000" step="1000">
                    </div>
                    <button class="btn btn-primary" onclick="addAmount()">+ ThÃªm</button>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">ğŸ° Giá»›i háº¡n lÆ°á»£t láº¯c (má»—i ngÆ°á»i)</label>
                <div class="form-row">
                    <input type="number" class="form-input" id="spinLimitInput" min="0" max="100" value="2"
                        style="max-width: 120px;">
                    <span style="color: var(--gold-300); font-size: 0.85rem; align-self: center;">
                        (0 = khÃ´ng giá»›i háº¡n)
                    </span>
                </div>
            </div>

            <button class="btn btn-primary mt-md" onclick="saveSettingsClick()">ğŸ’¾ LÆ°u cÃ i Ä‘áº·t</button>
        </div>

        <!-- Wish Management -->
        <div class="admin-card">
            <h2>ğŸ“ Quáº£n lÃ½ lá»i chÃºc <span style="font-size: 0.8rem; color: #888; font-weight:400" id="wishCount"></span>
            </h2>

            <!-- Input Mode Toggle -->
            <div style="display:flex; gap:8px; margin-bottom: 16px;">
                <button class="btn btn-sm" id="btnModeSingle" onclick="setInputMode('single')"
                    style="background: var(--gold-500); color: var(--dark);">ğŸ“ ThÃªm tá»«ng cÃ¢u</button>
                <button class="btn btn-sm btn-outline" id="btnModeBulk" onclick="setInputMode('bulk')">ğŸ“‹ ThÃªm nhiá»u
                    cÃ¢u</button>
            </div>

            <!-- Single Mode -->
            <div class="form-group" id="singleInputMode">
                <div class="form-row">
                    <div class="form-group" style="margin-bottom:0">
                        <input type="text" class="form-input" id="newWishInput" placeholder="Nháº­p lá»i chÃºc má»›i...">
                    </div>
                    <button class="btn btn-primary" onclick="addWish()">+ ThÃªm</button>
                </div>
            </div>

            <!-- Bulk Mode -->
            <div class="form-group hidden" id="bulkInputMode">
                <label class="form-label">Má»—i dÃ²ng lÃ  1 lá»i chÃºc</label>
                <textarea class="form-textarea" id="bulkWishInput" rows="8"
                    placeholder="ChÃºc báº¡n nÄƒm má»›i vui váº»!&#10;ChÃºc má»«ng nÄƒm má»›i!&#10;An khang thá»‹nh vÆ°á»£ng!&#10;..."></textarea>
                <div style="display:flex; gap:8px; margin-top:12px; align-items:center;">
                    <button class="btn btn-primary" onclick="addBulkWishes()">+ ThÃªm táº¥t cáº£</button>
                    <span style="font-size:0.8rem; color:#888" id="bulkPreviewCount"></span>
                </div>
            </div>

            <ul class="wish-list" id="wishList"></ul>
        </div>

        <!-- History -->
        <div class="admin-card">
            <h2>ğŸ“œ Lá»‹ch sá»­ quay</h2>
            <div class="history-list" id="historyList">
                <p style="color:#666; font-size: 0.85rem;">ChÆ°a cÃ³ lÆ°á»£t quay nÃ o.</p>
            </div>
            <button class="btn btn-danger btn-sm mt-md" onclick="clearHistory()">ğŸ—‘ XÃ³a lá»‹ch sá»­</button>
        </div>

        <!-- Danger Zone -->
        <div class="admin-card" style="border-color: rgba(230,57,70,0.2);">
            <h2 style="color: var(--red-400);">âš ï¸ Khu vá»±c nguy hiá»ƒm</h2>
            <div style="display:flex; gap:12px; flex-wrap:wrap;">
                <button class="btn btn-danger" onclick="resetAllData()">ğŸ”„ Reset toÃ n bá»™ (máº·c Ä‘á»‹nh)</button>
                <button class="btn btn-outline" onclick="exportData()">ğŸ“¤ Xuáº¥t dá»¯ liá»‡u</button>
                <button class="btn btn-outline" onclick="document.getElementById('importFile').click()">ğŸ“¥ Nháº­p dá»¯
                    liá»‡u</button>
                <input type="file" id="importFile" accept=".json" style="display:none" onchange="importData(event)">
            </div>
        </div>

        <!-- Change Password -->
        <div class="admin-card">
            <h2>ğŸ”‘ Äá»•i máº­t kháº©u</h2>
            <div class="form-row">
                <div class="form-group" style="margin-bottom:0">
                    <input type="password" class="form-input" id="newPasswordInput" placeholder="Máº­t kháº©u má»›i...">
                </div>
                <button class="btn btn-primary" onclick="changePassword()">Äá»•i</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script src="js/data.js"></script>
    <script src="js/admin.js"></script>
</body>

</html>